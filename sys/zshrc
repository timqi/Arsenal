[ -z "$PS1" ] && return
export ARSENALDIR="$HOME/Arsenal"

. $ARSENALDIR/sys/base.zsh
. $ARSENALDIR/sys/function.zsh

# fzf
. $ARSENALDIR/fzf/init.zsh

# node
. $ARSENALDIR/node/init.zsh

# zoxide
. $ARSENALDIR/zoxide/init.zsh

# zsh-autosuggestions
. $ARSENALDIR/zsh-autosuggestions/source/zsh-autosuggestions.zsh
# ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=253'
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=240'
ZSH_AUTOSUGGEST_BUFFER_MAX_SIZE=1000

# zsh-syntax-highlighting.zsh
. $ARSENALDIR/zsh-syntax-highlighting/source/zsh-syntax-highlighting.zsh

# conda
. $ARSENALDIR/conda/miniconda/etc/profile.d/conda.sh

# init PATH & platform profile
if [[ $PATH != "*$ARSENALDIR*" ]]; then
    export PATH="$ARSENALDIR/bin:$ARSENALDIR/bin/self:$ARSENALDIR/conda/miniconda/bin:$ARSENALDIR/bin/node:$HOME/go/bin:$PATH"
    export PYTHONPATH="."
fi

# Auto source ~/.platformrc
[[ -f "$HOME/.platformrc" ]] && . "$HOME/.platformrc"

# Auto open a default session using tmux in Linux environment
if [[ $(OSTYPE) != "macos" ]] && [[ $(OSTYPE) != "win" ]] &&\
    # Set tab title to hostname of current
    echo -ne "\033]0;`hostname`\007"

    # attach or new tmux session
	command -v tmux &> /dev/null && [ -z "$TMUX" ]; then
    default_tmux_session="0"
    tmux attach -t $default_tmux_session &> /dev/null || tmux new -s $default_tmux_session
fi

precmd() {
    if [[ -f .conda-version ]]; then conda activate `cat .conda-version`; else conda deactivate; fi
}

# Generated for envman. Do not edit.
[ -s "$HOME/.config/envman/load.sh" ] && source "$HOME/.config/envman/load.sh"

